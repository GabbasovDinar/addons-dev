<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='vat']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='street2']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='city']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='street']" position="before">
                <field name="house" placeholder="House..." style="width:49%"
                       attrs="{'readonly': [('type', '=', 'contact'),('parent_id', '!=', False)]}"/>
                <field name="flat" placeholder="Flat..." style="width:49%"
                       attrs="{'readonly': [('type', '=', 'contact'),('parent_id', '!=', False)], 'invisible': [('is_company','=', True)]}"/>
                <field name="office" placeholder="Office..." style="width:49%"
                       attrs="{'readonly': [('type', '=', 'contact'),('parent_id', '!=', False)], 'invisible': [('is_company','=', False)]}"/>
                <field name="district_id" class="o_address_country" placeholder="District" options='{"no_open": True, "no_create": True}'
                       attrs="{'readonly': [('type', '=', 'contact'),('parent_id', '!=', False)]}"/>
            </xpath>
            <xpath expr="//field[@name='lang']" position="before">
                <field name="inn" attrs="{'invisible': [('is_company','=', False)]}"/>
                <field name="kpp" attrs="{'invisible': [('is_company','=', False)]}"/>
                <field name="okpo" attrs="{'invisible': [('is_company','=', False)]}"/>
            </xpath>
            <xpath expr="//field[@name='city']" position="after">
                <field name="city_id"/>
            </xpath>
        </field>
    </record>

    <record id="add_seller_in_res_partner_formview" model="ir.ui.view">
        <field name="name">Partner.As.Seller</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="odoo_marketplace.add_seller_in_res_partner_formview"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='register_partner_as_a_seller']" position="after">
                <field name="send_email_to_seller" colspan="4" attrs="{'invisible':[('seller','=',False)]}"/>
                <field name="seller_email_template_id" colspan="4" attrs="{'required': [('send_email_to_seller', '=', True)], 'invisible':['|', ('send_email_to_seller','=',False), ('seller','=',False)]}"/>
                <field name="limit" colspan="4" attrs="{'invisible':[('seller','=',False)]}"/>
                <field name="total" colspan="4" attrs="{'invisible':[('seller','=',False)]}"/>
            </xpath>
        </field>
    </record>

    <!-- Partner Kanban View -->
    <record model="ir.ui.view" id="res_partner_kanban_view">
        <field name="name">res.partner.kanban</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.res_partner_kanban_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='city']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='street2']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='city']" position="after">
                <field name="city_id"/>
            </xpath>
            <xpath expr="//li[@t-if='record.city.raw_value and !record.country_id.raw_value']" position="replace">
                <li t-if="record.city_id.raw_value and !record.country_id.raw_value"><field name="city_id"/></li>
            </xpath>
            <xpath expr="//li[@t-if='!record.city.raw_value and record.country_id.raw_value']" position="replace">
                <li t-if="!record.city_id.raw_value and record.country_id.raw_value"><field name="country_id"/></li>
            </xpath>
            <xpath expr="//li[@t-if='record.city.raw_value and record.country_id.raw_value']" position="replace">
                <li t-if="record.city_id.raw_value and record.country_id.raw_value"><field name="city_id"/>, <field name="country_id"/></li>
            </xpath>
        </field>
    </record>

</odoo>
