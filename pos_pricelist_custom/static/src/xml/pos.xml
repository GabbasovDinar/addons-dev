<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2018 Dinar Gabbasov <https://it-projects.info/team/GabbasovDinar>
     License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl.html). -->

<templates id="template" xml:space="preserve">

    <t t-name="PricelistButton">
        <div class='control-button js_orderline_pricelist'>
            <i class='fa fa-usd' /> Default Pricelist (Active: <t t-esc="widget.get_pricelist_name()"/>)
        </div>
    </t>

    <t t-extend="Orderline">
        <t t-jquery="span[class*='price']" t-operation="replace">
            <t t-if="line.show_original_unit_price">
                <span class="price">
                    <t t-esc="widget.format_currency(line.get_display_original_price())"/>
                </span>
            </t>
            <t t-if="!line.show_original_unit_price">
                <span class="price">
                    <t t-esc="widget.format_currency(line.get_display_price())"/>
                </span>
            </t>
        </t>

        <t t-jquery="t[t-if*='line.get_discount_str()'] li[class='info']" t-operation="append">
            <t t-if="line.show_original_unit_price">
                <span class="price">
                    <t t-esc="widget.format_currency(line.get_display_price())"/>
                </span>
            </t>
        </t>
    </t>

    <t t-extend="Product">
        <t t-jquery="t[t-if='!product.to_weight'] span[class*='price-tag']" t-operation="replace">
            <t t-if="pricelist.pos_discount_policy === 'without_discount'">
                <span class="price-tag">
                    <t t-esc="widget.format_currency(product.lst_price,'Product Price')"/>
                </span>
            </t>
            <t t-if="pricelist.pos_discount_policy !== 'without_discount'">
                <span class="price-tag">
                    <t t-esc="widget.format_currency(product.get_price(pricelist, 1),'Product Price')"/>
                </span>
            </t>
        </t>
        <t t-jquery="t[t-if='product.to_weight'] span[class*='price-tag']" t-operation="replace">
            <t t-if="pricelist.pos_discount_policy === 'without_discount'">
                <span class="price-tag">
                    <t t-esc="widget.format_currency(product.lst_price,'Product Price')+'/'+widget.pos.units_by_id[product.uom_id[0]].name"/>
                </span>
            </t>
            <t t-if="pricelist.pos_discount_policy !== 'without_discount'">
                <span class="price-tag">
                    <t t-esc="widget.format_currency(product.get_price(pricelist, 1),'Product Price')+'/'+widget.pos.units_by_id[product.uom_id[0]].name"/>
                </span>
            </t>
        </t>
    </t>

</templates>
