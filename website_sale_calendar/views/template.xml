<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2018 Dinar Gabbasov <https://it-projects.info/team/GabbasovDinar>
     License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl.html). -->

<odoo>

    <!-- /shop/product product page -->
    <template id="product" inherit_id="website_sale.product">
        <xpath expr='//*[@class="js_product"]' position="before">
            <div class="row website-datetimepicker">
                <div class="col-md-5 checkin">
                    <input type='text' class="form-control " id='datetimepicker-checkin' placeholder="Check In" name="checkin"/>
                </div>
                <div class="col-md-2 arrow"><i class="fa fa-long-arrow-right"/></div>
                <div class="col-md-5 checkout">
                    <input type='text' class="form-control" id='datetimepicker-checkout' placeholder="Check Out" name="checkout"/>
                </div>
                <script type="text/javascript">
                    $(function () {
                        $('#datetimepicker-checkin').datetimepicker({
                            format: 'YYYY/MM/DD',
                            disabledDates: [
                                moment("06/25/2018"),
                                new Date(2018, 6, 21),
                                "06/22/2018"
                            ]
                        });
                        $('#datetimepicker-checkout').datetimepicker({
                            useCurrent: false,
                            format: 'YYYY/MM/DD',
                        });
                        $("#datetimepicker-checkin").on("dp.change", function (e) {
                            $('#datetimepicker-checkout').data("DateTimePicker").minDate(e.date);
                        });
                        $("#datetimepicker-checkout").on("dp.change", function (e) {
                            $('#datetimepicker-checkin').data("DateTimePicker").maxDate(e.date);
                        });
                    });
                </script>
            </div>

        </xpath>
        <xpath expr='//t[@t-set="head"]' position="inside">
            <!-- Momentjs -->
            <script type="text/javascript" src="/website_sale_calendar/static/lib/js/moment.js"></script>
            <!-- Bootstrap Date-Picker Plugin -->
            <script type="text/javascript" src="/website_sale_calendar/static/lib/js/bootstrap-datetimepicker.js"></script>
            <link rel="stylesheet" href="/website_sale_calendar/static/lib/css/bootstrap-datetimepicker.css"/>
            <link rel="stylesheet" href="/website_sale_calendar/static/lib/css/bootstrap-datetimepicker-standalone.css"/>
            <link rel="stylesheet" href="/website_sale_calendar/static/src/css/website-sale-datetimepicker.css"/>
        </xpath>
    </template>

    <!-- cart lines -->
    <template id="cart_lines" inherit_id="website_sale.cart_lines">
        <xpath expr='//*[@t-foreach="line.name.splitlines()[1:]"]/..' position="after">
            <div t-if="line.checkin and line.checkout" class="checkin-checkout-datetime"><t t-esc="line.checkin"/> to <t t-esc="line.checkout"/></div>
        </xpath>
    </template>

    <!-- payment -->
    <template id="payment" inherit_id="website_sale.payment">
        <xpath expr='//*[@t-foreach="line.name.splitlines()[1:]"]/..' position="after">
            <div t-if="line.checkin and line.checkout" class="checkin-checkout-datetime"><t t-esc="line.checkin"/> to <t t-esc="line.checkout"/></div>
        </xpath>
    </template>

    <!-- confirmation -->
    <template id="confirmation" inherit_id="website_sale.confirmation">
        <xpath expr='//*[@t-foreach="line.name.splitlines()[1:]"]/..' position="after">
            <div t-if="line.checkin and line.checkout" class="checkin-checkout-datetime"><t t-esc="line.checkin"/> to <t t-esc="line.checkout"/></div>
        </xpath>
    </template>

</odoo>
